
1- Identificar o vetor de entrada

Podemos usar o python para testar a entrada de dados, copiar e colar na entrada de dados
```python
python -c 'print "A" * 200'

#passando direto pro programa
python -c 'print "A" * 200' | ./protegido
```
![[Pasted image 20240311152642.png]]
buscamos pelo "Segmentation Fault" onde informa que o programa quebrou

Debugando o programa

```bash
#Usando o GDB
gdb -q ./protegido

info functions - Lista as funções que o programa tem
disas - Faz o disasemly em determinada função, exemplo: disas main
set disassemly-flavor intel - Muda para sintaxe da intel (Melhor opção)
run - Executa o programa

```

No momento do debug é importante sempre ir verificando pelas funções CALL.

call - Chama uma determinada
lea - Aloca um determinado valor dentro de um registrador
Exemplo
![[Pasted image 20240311155708.png]]

![[Pasted image 20240311155952.png]]
Nesse caso oo programa está reservando 136 bytes (0x88) para receber o valor na função gets
```python
python2 -c "print 0x88"
```

![[Pasted image 20240311160259.png]]

Logo em seguida no código depois do programa comparar o que o usuário digitou, existe uma chamada de jne onde caso a comparação feita nao for igual, o programa vai pular pro endereço 0x56556253 e executar todo o código (em amarelo). Se for igual, o programa vai executar todo o código vermelho.

jne - Jump not equal ( Pule se nao for igual)

![[Pasted image 20240311160700.png]]

Em seguida
![[Pasted image 20240311162312.png]]

Função acessa
![[Pasted image 20240311162433.png]]

Testando o programa no debugger

![[Pasted image 20240311163130.png]]
Enviando 200 bytes para o programa, acusa o segmentation fault. Acontece que dentro do programa é possível ver o que ocorreu. Para verificar os registradores basta digitar " info registers"

![[Pasted image 20240311163254.png]]
Indicando que o EIP e outros registradores foram subescrevidos

#Examinando-memória
![[Pasted image 20240311163826.png]]

Podemos alterar o formato que enxergamos os dados na memória

```
x/16xw $esp

x - Utilitario para visualizar a memória
/16 - indica a quantidade de bytes
x - definindo que o formato será um hexadecimal
w - formato de letra
```