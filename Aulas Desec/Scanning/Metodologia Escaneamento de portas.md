
![[Pasted image 20231125150712.png]]

#TCP-Host_scan

```
nmap -v -sS -p- -Pn target

-v - verbose
-sS - Syn scan
-p- - Scaneia todas as portas TCP
-Pn - Ignora validação de host vivo
```

#UDP-Host-Scan

```
nmap -v -sUV  -p- -Pn target

-v - verbose
-sUV - roda UDP scan e valida se as portas estao abertas
-p- - Scaneia todas as portas TCP
-Pn - Ignora validação de host vivo
```

![[Pasted image 20231125151733.png]]
 quando tiver dúvida se a porta está aberta ou não, se conectar no serviço para ter certeza, ou usar o nmap.
 
#NETWORK-SWEEPING

Primeira coisa a se fazer é realizar um scan completo na rede
```
nmap -v -sn 172.16.1.0/24 -oG ativos.txt

-v - verbose
-sn - ping scan
-oG - Indica a saida do resultado pra um arquivo no formato grepable
```

após isso, analisar o arquivo e identificar somente os hosts ativos e fazer um filtro
```
grep " Up" ativos.txt | cut -d " " -f 2 > hosts
```

exemplos de uso

verificar somente hosts que tenha a porta 80 ativa/aberta
```
nmap -sSV -p 80 --open -Pn -iL -oG web.txt hosts

-sSV - realiza um Syn scan e identifica o banner/versão
--open - Informa somente as portas abertas, ignorando as fechadas
-Pn - ignora validaçao de host vivo
-iL - carrega uma lista
-oG - Indica a saida do resultado pra um arquivo no formato grepable
```

verificar somente hosts que tenham portas servidores de arquivos aberta/ativa
```
nmap -sSV -p 139,445 --open -Pn -iL hosts -oG share.txt

-sSV - realiza um Syn scan e identifica o banner/versão
-p - indica as portas que serao escaneadas
--open - Informa somente as portas abertas, ignorando as fechadas
-Pn - ignora validaçao de host vivo
-iL - carrega uma lista
-oG - Indica a saida do resultado pra um arquivo no formato grepable
```

verificar serviços com portas abertas de interface de administração
```
nmap -sSV -p 21,22,23,3389 --open -Pn -iL hosts -oG remote.txt

-sSV - realiza um Syn scan e identifica o banner/versão
-p - indica as portas que serao escaneadas
--open - Informa somente as portas abertas, ignorando as fechadas
-Pn - ignora validaçao de host vivo
-iL - carrega uma lista
-oG - Indica a saida do resultado pra um arquivo no formato grepable
```
